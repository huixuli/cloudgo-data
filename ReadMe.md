# CloudGo构建数据库服务
标签（空格分隔）： go语言学习

---
本部分的目标是使用golangdatabase/sql写出易于阅读、扩展和可维护的数据库服务。重点是掌握经典的 “entity - dao - service” 层次结构编程模型。
参考博客：[golang构建数据服务](http://blog.csdn.net/pmlpml/article/details/78602290)。
## 数据库的安装与测试
1.用docker安装数据库sql:5.7

![](/图片/1.png)

2.启动 mysql 作为主机服务

![](/图片/2.png)

3. 启动 mysql client 访问服务器

![](/图片/3.png)

4.数据库一些功能的测试

创建数据库：

![](/图片/4.1.png)

显示数据库：

![](/图片/4.2png)

显示数据库的表table：

![](/图片/4.3.png)

显示表中详细信息：

![](/图片/4.4.png)

删除创建的数据库：

![](/图片/4.5.png)

退出客户端：

![](/图片/4.6.png)





##代码运行测试

hello测试：

![](/图片/5.png)

用curl上传数据库信息：

![](/图片/6.1.png)

![](/图片/6.2.png)

![](/图片/6.3.png)

用curl显示上传的表内信息：

![](/图片/7.png)

在网站上显示上传的表内信息：

![](/图片/8.png)

orm实现了dao的自动化，使得我们不需要编写dao服务。

## ad压力测试

sql测试结果：

![](/图片/sql.png)

orm测试结果：

![](/图片/orm.png)

测试结果分析：
根据上图中的测试结果我们可以看出服务性能应该是database/sql比较好,毕竟orm是牺牲性能获得易用性 。
不过我们使用orm是为了减少重复性代码，当我们实现一个应用程序时（不使用O/R Mapping），可能会写特别多数据访问层的代码，从数据库保存、删除、读取对象信息，而这些代码很多都是重复的。而使用orm即对象关系映射则会大大减少重复性代码，它主要实现程序对象到关系数据库数据的映射。
使用orm的优点和缺点：
优点：
    -提高开发效率，降低开发成本。程序员不再关注数据库细节，专心在       业务逻辑，程序员可以不懂数据库就可以开发系统。
    - 使开发更加对象化。
    -可移植。
    -可以很方便地引入数据缓存之类的附加功能。
    -让数据库迁移变的非常方便，如果系统需要更改使用的数据库，直接改     配制，不再管不同数据库之间的语法差异。
    - 省时，可快速开发，因为不需要自己写复杂的SQL语句，不需要封装复       杂的数据底层，这样可以节省很多时间。
缺点：
    - 自动化进行关系数据库的映射需要消耗系统性能。
    - 在处理多表联查、where条件复杂之类的查询时，ORM的语法会变得复       杂。
    -ORM不能帮你生成所有的业务语句，有些复杂的生成不了，还是需要写S      QL，例如复杂的报表。




